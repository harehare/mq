# Test file for mq syntax highlighting
# This file tests various syntax elements to ensure proper highlighting

# ============================================
# 1. Keywords and Control Flow
# ============================================

# Keywords should be highlighted (def, if, elif, else, end, etc.)
def test_function(x):
  if x > 0:
    "positive"
  elif x < 0:
    "negative"
  else
    "zero"
  end;

# while and foreach
while condition:
  do_something()
end;

foreach (item, list):
  process(item)
end;

# ============================================
# 2. Boolean Values in Different Contexts
# ============================================

# Boolean keywords: true, false
let flag = true
let disabled = false

# Boolean in function names (should NOT be highlighted as boolean)
def is_true(x):
  x == true;

def has_false_value():
  false;

# Boolean-like names (should NOT be highlighted)
def truely_works():
  "yes";

def falsey():
  "no";

# ============================================
# 3. Keywords in Function Names
# ============================================

# 'elif' in function name (should NOT be highlighted as keyword)
def relief(x):
  x;

# 'if' in function name (should NOT be highlighted as keyword)
def verify_if_valid(x):
  x;

# 'else' in function name (should NOT be highlighted as keyword)
def something_else():
  "other";

# ============================================
# 4. Built-in Functions
# ============================================

# These should be highlighted as built-in functions
upcase("hello")
downcase("WORLD")
split("a,b,c", ",")
join(["a", "b"], "-")
len([1, 2, 3])
first([1, 2, 3])
last([1, 2, 3])
slice("hello", 0, 3)

# Type checking functions
is_none(x)
is_number(123)
is_string("text")
is_boolean(true)
is_array([])
is_object({})
is_mdx()

# Conversion functions
to_text(123)
to_number("123")
to_string(value)
to_json(data)
to_link("#heading", "text", "")
to_md_list("item", 1)

# ============================================
# 5. Selectors
# ============================================

# These should be highlighted as selectors
.code("js")
.h
.h1
.h2
.[]
.[][]
.text
.links
.images

# ============================================
# 6. Strings and Interpolation
# ============================================

# Regular strings
let message = "Hello, World!"
let path = "/path/to/file"

# Escape sequences
let escaped = "Line 1\nLine 2\tTabbed"

# Interpolated strings
let name = "Alice"
let greeting = s"Hello, ${name}!"
let complex = s"Result: ${upcase(name)} - ${len(name)}"

# ============================================
# 7. Numbers
# ============================================

# Integers
let int1 = 42
let int2 = 0
let negative = -10

# Floats
let float1 = 3.14
let float2 = 0.5
let negative_float = -2.718

# Hex
let hex = 0xFF

# Binary
let binary = 0b1010

# ============================================
# 8. Operators
# ============================================

# Arithmetic
let sum = a + b
let diff = a - b
let product = a * b
let quotient = a / b
let remainder = a % b

# Comparison
a == b
a != b
a < b
a > b
a <= b
a >= b

# Logical
a && b
a || b
!a

# Pipe
data | upcase() | split(",")

# Assignment
let x = 10

# Arrow
x -> y

# ============================================
# 9. Comments and TODO
# ============================================

# Regular comment
# This is a comment

# TODO: Implement this feature
# FIXME: This needs to be fixed
# XXX: Warning about this
# NOTE: Remember this

# ============================================
# 10. Symbols
# ============================================

:symbol
:another_symbol
:KEY_NAME

# ============================================
# 11. Complex Example
# ============================================

def snake_to_camel(x):
  let words = split(x, "_")
  | foreach (word, words):
    let first_char = upcase(first(word))
    | let rest_str = downcase(slice(word, 1, len(word)))
    | s"${first_char}${rest_str}";
  | join("");

# Call the function
snake_to_camel("hello_world")

# ============================================
# 12. Markdown Processing
# ============================================

# Extract code blocks
.code("javascript")
.code("python")

# Process headings
.h | to_text(self)

# Generate table of contents
.h
| let link = to_link("#" + to_text(self), to_text(self), "")
| let level = .h.depth
| if (!is_none(level)): to_md_list(link, to_number(level))

# ============================================
# 13. Include and Module
# ============================================

include "csv"
include "json"

module utils
import helpers

# ============================================
# 14. Special Keywords
# ============================================

self
nodes
fn
match
break
continue

# ============================================
# End of Test File
# ============================================
